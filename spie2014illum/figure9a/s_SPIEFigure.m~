
Ti = 3000; Te = 10000; Nils = 100;
Tstep = 1/((1/Te-1/Ti)/Nils);
T = round(1./(1/Ti:1/Tstep:1/Te));
ils = cell(Nils,1);
for i = 1:Nils+1
   ils{i} = sprintf('B%d',T(i));
end

ils{Nils+2} = 'D65';

scene = sceneFromFile('StuffedAnimals.mat','multispectral');

load L3camera_RGBW1_D651
sz = sceneGet(scene,'size') + 20;
camera = cameraSet(camera,'sensor size',sz);
oi     = cameraGet(camera,'oi');
sensor = cameraGet(camera,'sensor');
sDist  = sceneGet(scene,'distance');
scenefov = sensorGet(sensor,'fov',sDist,oi);
scene = sceneSet(scene,'fov',scenefov);

for i = 1:length(ils)
    scene = sceneAdjustIlluminantEq(scene,ils{i});
    [~,xyzIdeal] = cameraCompute(camera,scene,'idealxyz');
    imagesc(xyz2srgb(xyzIdeal/max(xyzIdeal(:)));
    if



